CREATR PROC sp_GetLoaiVaccineSHH (@SoNgay INt)
AS
BEGIN
	SELECT vc.MALOAIVC AS 'MALOAI',lvc.LOAIVACCINE,SUM(SOLUONGCOSAN) AS "SOLUONGCOSAN"
	FROM VACCINE vc JOIN LOAIVC lvc ON lvc.MALOAIVC = vc.MALOAIVC
	WHERE DATEDIFF(DAY, GETDATE(), HANSD)<@SoNgay
	GROUP BY lvc.LOAIVACCINE, vc.MALOAIVC
END

CREATE PROC sp_GetVaccineSHH (@SoNgay INT)
AS
BEGIN
	SELECT vc.MAVACCINE, TENVACCINE,vc.NHASX, vc.NGAYSX, vc.HANSD, vc.SOLO, vc.SOLUONGCOSAN, vc.DONGIA,lvc.LOAIVACCINE,DATEDIFF(DAY, GETDATE(), vc.HANSD) AS 'SONGAYCONLAI'
	FROM VACCINE vc JOIN LOAIVC lvc ON lvc.MALOAIVC = vc.MALOAIVC
	WHERE DATEDIFF(DAY, GETDATE(), HANSD)<@SoNgay
	GROUP BY vc.MAVACCINE, TENVACCINE,vc.NHASX, vc.NGAYSX, vc.HANSD, vc.SOLO, vc.SOLUONGCOSAN, vc.DONGIA,lvc.LOAIVACCINE,vc.HANSD
	ORDER BY SONGAYCONLAI ASC
END

CREATE PROC sp_SearchAllVaccineSHH (@Value NVARCHAR(100), @SoNgay INT)
AS
BEGIN
    SELECT vc.MAVACCINE, TENVACCINE,vc.NHASX, vc.NGAYSX, vc.HANSD, vc.SOLO, vc.SOLUONGCOSAN, vc.DONGIA,lvc.LOAIVACCINE,DATEDIFF(DAY, GETDATE(), vc.HANSD) AS 'SONGAYCONLAI'
	FROM VACCINE vc INNER JOIN LOAIVC lvc ON lvc.MALOAIVC = vc.MALOAIVC
    WHERE (vc.MAVACCINE LIKE N'%' + @Value + '%'
    OR vc.TENVACCINE LIKE N'%' + @Value + '%'
    OR vc.NHASX LIKE N'%' + @Value + '%'
    OR vc.NGAYSX LIKE N'%' + @Value + '%'
    OR vc.HANSD  LIKE N'%' + @Value + '%'
    OR vc.SOLO LIKE N'%' + @Value + '%'
    OR vc.SOLUONGCOSAN LIKE N'%' + @Value + '%'
    OR lvc.LOAIVACCINE LIKE N'%' + @Value + '%'
    OR vc.DONGIA LIKE N'%' + @Value + '%') 
	AND DATEDIFF(DAY, GETDATE(), HANSD)<@SoNgay
	GROUP BY vc.MAVACCINE, TENVACCINE,vc.NHASX, vc.NGAYSX, vc.HANSD, vc.SOLO, vc.SOLUONGCOSAN, vc.DONGIA,lvc.LOAIVACCINE,vc.HANSD
	ORDER BY SONGAYCONLAI ASC
END

CREATE PROC sp_SearchByLoaiVCSHH (@Value NVARCHAR(100), @SoNgay INT)
AS
BEGIN
    SELECT vc.MAVACCINE, TENVACCINE,vc.NHASX, vc.NGAYSX, vc.HANSD, vc.SOLO, vc.SOLUONGCOSAN, vc.DONGIA,lvc.LOAIVACCINE,DATEDIFF(DAY, GETDATE(), vc.HANSD) AS 'SONGAYCONLAI'
	FROM VACCINE vc INNER JOIN LOAIVC lvc ON lvc.MALOAIVC = vc.MALOAIVC
    WHERE lvc.LOAIVACCINE LIKE N'%' + @Value + '%' AND DATEDIFF(DAY, GETDATE(), HANSD)<@SoNgay
	GROUP BY vc.MAVACCINE, TENVACCINE,vc.NHASX, vc.NGAYSX, vc.HANSD, vc.SOLO, vc.SOLUONGCOSAN, vc.DONGIA,lvc.LOAIVACCINE,vc.HANSD
	ORDER BY SONGAYCONLAI ASC
END

CREATE PROC sp_SearchByMaVCSHH (@Value char(10), @SoNgay INT)
AS
BEGIN
    SELECT vc.MAVACCINE, TENVACCINE,vc.NHASX, vc.NGAYSX, vc.HANSD, vc.SOLO, vc.SOLUONGCOSAN, vc.DONGIA,lvc.LOAIVACCINE,DATEDIFF(DAY, GETDATE(), vc.HANSD) AS 'SONGAYCONLAI'
	FROM VACCINE vc INNER JOIN LOAIVC lvc ON lvc.MALOAIVC = vc.MALOAIVC
    WHERE vc.MAVACCINE LIKE N'%' + @Value + '%' AND DATEDIFF(DAY, GETDATE(), HANSD)<@SoNgay
	GROUP BY vc.MAVACCINE, TENVACCINE,vc.NHASX, vc.NGAYSX, vc.HANSD, vc.SOLO, vc.SOLUONGCOSAN, vc.DONGIA,lvc.LOAIVACCINE,vc.HANSD
	ORDER BY SONGAYCONLAI ASC
END

CREATE PROC sp_SearchByNhaSXSHH (@Value NVARCHAR(100), @SoNgay INT)
AS
BEGIN
    SELECT vc.MAVACCINE, TENVACCINE,vc.NHASX, vc.NGAYSX, vc.HANSD, vc.SOLO, vc.SOLUONGCOSAN, vc.DONGIA,lvc.LOAIVACCINE,DATEDIFF(DAY, GETDATE(), vc.HANSD) AS 'SONGAYCONLAI'
	FROM VACCINE vc INNER JOIN LOAIVC lvc ON lvc.MALOAIVC = vc.MALOAIVC
    WHERE vc.NHASX LIKE N'%' + @Value + '%' AND DATEDIFF(DAY, GETDATE(), HANSD)<@SoNgay
	GROUP BY vc.MAVACCINE, TENVACCINE,vc.NHASX, vc.NGAYSX, vc.HANSD, vc.SOLO, vc.SOLUONGCOSAN, vc.DONGIA,lvc.LOAIVACCINE,vc.HANSD
	ORDER BY SONGAYCONLAI ASC
END

CREATE PROC sp_SearchByTenSHH (@Value NVARCHAR(100), @SoNgay INT)
AS
BEGIN
    SELECT vc.MAVACCINE, TENVACCINE,vc.NHASX, vc.NGAYSX, vc.HANSD, vc.SOLO, vc.SOLUONGCOSAN, vc.DONGIA,lvc.LOAIVACCINE,DATEDIFF(DAY, GETDATE(), vc.HANSD) AS 'SONGAYCONLAI'
	FROM VACCINE vc INNER JOIN LOAIVC lvc ON lvc.MALOAIVC = vc.MALOAIVC
    WHERE vc.TENVACCINE LIKE N'%' + @Value + '%' AND DATEDIFF(DAY, GETDATE(), HANSD)<@SoNgay
	GROUP BY vc.MAVACCINE, TENVACCINE,vc.NHASX, vc.NGAYSX, vc.HANSD, vc.SOLO, vc.SOLUONGCOSAN, vc.DONGIA,lvc.LOAIVACCINE,vc.HANSD
	ORDER BY SONGAYCONLAI ASC
END
